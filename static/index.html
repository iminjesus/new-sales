<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>July Sales Dashboard</title>

  <!-- CDN for Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Absolute paths since index.html is served from "/" -->
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <h1>July Sales Dashboard</h1>

  <!-- Category buttons -->
  <label>Category:</label>
  <div id="catBtns" class="controls" style="gap:6px;">
    <button class="btn active" data-val="ALL">All</button>
    <button class="btn" data-val="PCLT">PCLT</button>
    <button class="btn" data-val="TBR">TBR</button>
    <button class="btn" data-val="18PLUS">18+ Inch</button>
    <button class="btn" data-val="ISEG">EV/iSeg</button>
    <button class="btn" data-val="SUV">SUV</button>
    <button class="btn" data-val="LOWPROFILE">Low profile / Strategic TBR</button>
    <button class="btn" data-val="HM">HM</button>
  </div>

  <div class="controls">
    <div id="metricBtns" class="controls" style="gap:6px;">
      <button class="btn" data-metric="qty">Qty</button>
      <button class="btn" data-metric="amount">Amount</button>
    </div>

    <label>Group By:</label>
    <select id="group_by">
      <option value="region" selected>Region</option>
      <option value="salesman">Salesman</option>
      <option value="sold_to_group">Sold-to Group</option>
      <option value="sold_to">Sold-to</option>
      <option value="product_group">Product Group</option>
    </select>

    <label style="margin-left:10px;">Region:</label>
    <div id="regionBtns" class="controls" style="gap:6px;">
      <button class="btn" data-val="ALL">ALL</button>
      <button class="btn" data-val="NSW">NSW</button>
      <button class="btn" data-val="QLD">QLD</button>
      <button class="btn" data-val="VIC">VIC</button>
      <button class="btn" data-val="WA">WA</button>
    </div>

    <label>Salesman:</label>
    <select id="salesman_name"><option value="ALL">ALL</option></select>

    <label>Sold-to Group:</label>
    <select id="sold_to_group"><option value="ALL">ALL</option></select>
    

    <label for="sold_to">Sold-to:</label>
    <input type="text" id="sold_to" placeholder="Search Sold-to..." list="sold_to_list" />
    <datalist id="sold_to_list"></datalist>

    <label>View:</label>
    <div id="topModeBtns" class="controls" style="gap:6px;">
      <button class="btn active" data-mode="all">All</button>
      <button class="btn" data-mode="top10">Top 10 (2025)</button>
    </div>

    <label>Product Group:</label>
    <select id="product_group"><option value="ALL">ALL</option></select>

    <button id="applyBtn" class="btn">Apply</button>
  </div>

  <!-- KPI: Achievement % (overall) -->
  <div class="kpi-row">
    <div class="kpi-card" id="achvCard">
      <div>
        <div class="kpi-title">Achievement %</div>
        <div class="kpi-sub" id="achvSub">Actual — / Target —</div>
      </div>
      <div class="kpi-right kpi-value" id="achvValue">--%</div>
    </div>
  </div>

  <!-- KPI: Achievement by Salesman -->
  <h2 style="margin:8px 0 6px;">Achievement by Salesman</h2>
  <div id="salesmanKpiGrid" class="kpi-grid"></div>

  <!-- ROW 1: base 2 charts -->
  <div class="chart-row">
    <div class="box"><h2 id="dailyTitle">Daily Sales</h2><canvas id="dailyChart"></canvas></div>
    <div class="box"><h2 id="cumTitle">Cumulative Sales</h2><canvas id="cumulativeChart"></canvas></div>
  </div>

  <!-- ROW 2: stacked 2 charts -->
  <div class="chart-row" style="margin-top:16px;">
    <div class="box"><h2>Stacked Daily</h2><canvas id="stackedDailyChart"></canvas></div>
    <div class="box"><h2>Stacked Cumulative</h2><canvas id="stackedCumulativeChart"></canvas></div>
  </div>

  <!-- ROW 3: stacked % 2 charts -->
  <div class="chart-row" style="margin-top:16px;">
    <div class="box"><h2>Stacked Daily %</h2><canvas id="stackedDailyPercentChart"></canvas></div>
    <div class="box"><h2>Stacked Cumulative %</h2><canvas id="stackedCumulativePercentChart"></canvas></div>
  </div>

  <!-- ROW 4: base 2 charts Monthly -->
  <div class="chart-row" style="margin-top:16px;">
    <div class="box"><h2>Monthly Sales</h2><canvas id="monthlyChart"></canvas></div>
    <div class="box"><h2>Cumulative by Month</h2><canvas id="monthlyCumChart"></canvas></div>
  </div>

  <!-- ROW 5: stacked 2 charts Monthly -->
  <div class="chart-row" style="margin-top:16px;">
    <div class="box"><h2>Stacked Monthly</h2><canvas id="stackedMonthlyChart"></canvas></div>
    <div class="box"><h2>Stacked Cumulative by Month</h2><canvas id="stackedMonthlyCumChart"></canvas></div>
  </div>

  <!-- ROW 6: stacked % 2 charts monthly -->
  <div class="chart-row" style="margin-top:16px;">
    <div class="box"><h2>Stacked Monthly %</h2><canvas id="stackedMonthlyPercentChart"></canvas></div>
    <div class="box"><h2>Stacked Cumulative by Month %</h2><canvas id="stackedMonthlyCumPercentChart"></canvas></div>
  </div>

  <!-- tiny error bar to surface API issues -->
  <div id="errbar" class="errbar" hidden></div>

  <script src="/static/app.js" defer></script>
</body>
</html>
